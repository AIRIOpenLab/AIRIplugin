function bandiReady(){var a={nome:0,ente:1,destinatari:2,apertura:3,aperturasort:4,chiusurasort:5,paese:6,tools:7},t={scadutoBg:"#EEE"};jQuery(function(e){function s(){var a=e("#tabella-bandi").dataTable().fnSettings();console.log(a);var t=e("#lista-paesi-search").val(),s=e("#lista-destinatari-search").val();null==t&&(t=-1),null==s&&(s=-1);var r={action:"getBandi",sa:0|e("#showall").is(":checked"),country:t,dest:s,search:a.oPreviousSearch.sSearch,draw:a.iDraw,start:a._iDisplayStart,length:a._iDisplayLength,columns:"",order:""};return r.sorting=a.aaSorting[0],r}table=e("#tabella-bandi").DataTable({language:{url:"http://cdn.datatables.net/plug-ins/f2c75b7247b/i18n/Italian.json"},bProcessing:"true",bServerSide:"true",searchDelay:1e3,ajax:{url:DataTablesLoadData.ajaxURL,data:s,type:"POST"},pageLength:10,lengthMenu:[10,30,100],order:[[a.chiusurasort,"desc"]],columnDefs:[{targets:[a.nome],width:"50em"},{targets:[a.paese],sortable:!1,visible:!0},{targets:[a.destinatari],sortable:!1},{targets:[a.aperturasort],visible:!1},{targets:[a.chiusurasort],visible:!1},{targets:[a.tools],sortable:!1}],fnRowCallback:function(s,r,n,i){-1!=r[a.apertura].indexOf("SCADUTO")&&e("td",s).css("background-color",t.scadutoBg)},responsive:{details:{type:"column",target:"tr"}},sDom:'<"#extraTableControls">frtip',fnDrawCallback:function(a){if(0==e("#extraTableControls").children().length){e("div#extraTableControls").css("float","left");var t=e("<span>Mostra solo bandi in: </span>"),s=e("<select id='lista-paesi-search'>");e("<option />",{value:-1,text:"Tutti i Paesi"}).appendTo(s);var r=e("<br /><span>Destinatari: </span>"),n=e("<select id='lista-destinatari-search'>");e("<option />",{value:-1,text:"Tutti"}).appendTo(n),e("<option />",{value:1,text:"Studenti"}).appendTo(n),e("<option />",{value:2,text:"Laureati"}).appendTo(n),e("<option />",{value:3,text:"Dottorandi"}).appendTo(n),e("<option />",{value:4,text:"Postdoc"}).appendTo(n),e("<option />",{value:5,text:"Ricercatori"}).appendTo(n),e("#extraTableControls").append(t),e("#extraTableControls").append(s),e("#extraTableControls").append(r),e("#extraTableControls").append(n),e("#lista-destinatari-search").change(function(){table.ajax.reload()}),1==e("#lista-paesi-search").size()&&e.ajax({type:"POST",dataType:"json",url:DataTablesLoadData.ajaxURL,data:{action:"act_getPaesi"},success:function(a){for(sel=e("#lista-paesi-search"),i=0;i<a.paesi.length;i++)sel.append(e("<option>").attr("value",a.ids[i]).text(a.paesi[i]));e(sel).change(function(){table.ajax.reload()})},error:function(a,t,e){alert("ERRORE: "+e+" - Status: "+a.status)}})}}}),e("#showall").change(function(){table.ajax.reload()})})}jQuery(document).ready(bandiReady);
